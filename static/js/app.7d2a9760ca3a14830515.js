webpackJsonp([13],{116:function(t,n,e){"use strict";function o(t,n){var e={latitude:t,longitude:n};return d.a.get("https://mainsite-restapi.ele.me/bgs/poi/reverse_geo_coding",{params:e}).then(function(t){return l.a.resolve(t.data)})}function i(t){var n={keyword:t,offset:0,limit:20};return d.a.get("https://mainsite-restapi.ele.me/bgs/poi/search_poi_nearby",{params:n}).then(function(t){return l.a.resolve(t.data)})}function r(t,n,e){var o={latitude:t,longitude:n,geohash:e};return d.a.get("https://mainsite-restapi.ele.me/shopping/v3/hot_search_words",{params:o}).then(function(t){return l.a.resolve(t.data)})}function s(t,n,e,o,i,r,s,c){var a={offset:e,limit:20,keyword:o,latitude:t,longitude:n,search_item_type:2,"extra[]":"activities"};return i&&(a=u()({},a,{"restaurant_category_ids[]":i})),(r||0===r)&&(a=u()({},a,{order_by:r})),(s||0===s)&&(a=u()({},a,{"delivery_mode[]":s})),c&&(a=u()({},a,{support_ids:c})),d.a.get("https://mainsite-restapi.ele.me/shopping/v1/restaurants/search",{params:a}).then(function(t){return l.a.resolve(t.data)})}n.a=o,n.b=i,n.d=r,n.c=s;var c=e(77),u=e.n(c),a=e(172),l=e.n(a),f=e(171),d=e.n(f)},123:function(t,n,e){"use strict";e.d(n,"g",function(){return o}),e.d(n,"h",function(){return i}),e.d(n,"i",function(){return r}),e.d(n,"j",function(){return s}),e.d(n,"k",function(){return c}),e.d(n,"a",function(){return u}),e.d(n,"b",function(){return a}),e.d(n,"c",function(){return l}),e.d(n,"d",function(){return f}),e.d(n,"l",function(){return d}),e.d(n,"m",function(){return h}),e.d(n,"n",function(){return p}),e.d(n,"f",function(){return g}),e.d(n,"e",function(){return _});var o="SET_SELECTED_SHOPPER",i="SET_CART_FOODS",r="DECREASE_COUNT",s="EMPTY_CART_FOODS",c="SET_SELECTED_ENTRIES",u="SET_LATITUDE",a="SET_LONGITUDE",l="SET_GEOHASH",f="SET_SEARCH_HISTORY",d="SET_SHOWFLAGGPS",h="SET_USERINFO",p="EMPTY_USERINFO",g="SET_ALERTTEXT",_="SET_HASTIPS"},163:function(t,n,e){"use strict";var o=e(73),i=e(431),r=function(t){e.e(0).then(e.bind(null,447)).then(function(n){t(n)})},s=function(t){e.e(2).then(e.bind(null,438)).then(function(n){t(n)})},c=function(t){e.e(11).then(e.bind(null,445)).then(function(n){t(n)})},u=function(t){e.e(3).then(e.bind(null,444)).then(function(n){t(n)})},a=function(t){e.e(1).then(e.bind(null,441)).then(function(n){t(n)})},l=function(t){e.e(5).then(e.bind(null,437)).then(function(n){t(n)})},f=function(t){e.e(9).then(e.bind(null,442)).then(function(n){t(n)})},d=function(t){e.e(4).then(e.bind(null,443)).then(function(n){t(n)})},h=function(t){e.e(8).then(e.bind(null,440)).then(function(n){t(n)})},p=function(t){e.e(6).then(e.bind(null,439)).then(function(n){t(n)})},g=function(t){e.e(7).then(e.bind(null,446)).then(function(n){t(n)})},_=function(t){e.e(10).then(e.bind(null,448)).then(function(n){t(n)})};o.a.use(i.a),n.a=new i.a({routes:[{path:"/",redirect:"/msite"},{path:"/msite",component:a},{path:"/discover",component:l},{path:"/order",component:f},{path:"/profile",component:d,children:[{path:"info",component:p}]},{path:"/login",component:h},{path:"/service",component:g},{path:"/vipcard",component:_},{path:"/shop/id=:id",component:r},{path:"/food",component:s},{path:"/search",component:c,children:[{path:"shop",component:u}]}]})},164:function(t,n,e){"use strict";var o=e(73),i=e(76),r=e(198),s=e(196),c=e(197),u=e(195),a=e(433);e.n(a);o.a.use(i.d);n.a=new i.d.Store({state:r.a,getters:s,mutations:c.a,actions:u.a,strict:!1,plugins:[]})},166:function(t,n){},168:function(t,n,e){t.exports=e.p+"static/img/default.24985a6.jpg"},170:function(t,n,e){function o(t){e(422)}var i=e(74)(e(199),e(429),o,"data-v-56e95acb",null);t.exports=i.exports},173:function(t,n,e){"use strict";function o(t){if(t){return"//fuss10.elemecdn.com/"+i(t)+"?imageMogr/format/webp/thumbnail/!120x120r/gravity/Center/crop/120x120/"}}function i(t){t=t.split(""),t.splice(1,0,"/"),t.splice(4,0,"/");var n=t.join("");return/(png)/g.test(n)?n+".png":/(jpg)/g.test(n)?n+".jpg":n+".jpeg"}function r(t){var n=[],e="",o=/\[(\d+|,\s)+\d+\]/g,i=t.match(o);if(i&&i.length>=1){n=i[1].replace(/^\[|\]$/g,"").split(", ");for(var r=0;r<n.length;r++)e+="&restaurant_category_ids[]="+n[r]}return e}function s(t,n){var e=void 0;return function(){for(var o=this,i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];e&&clearTimeout(e),e=setTimeout(function(){t.apply(o,r)},n)}}n.b=o,n.c=r,n.a=s},174:function(t,n,e){function o(t){e(423)}var i=e(74)(e(200),e(430),o,null,null);t.exports=i.exports},194:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(165),i=(e.n(o),e(73)),r=e(170),s=e.n(r),c=e(163),u=e(167),a=e.n(u),l=e(169),f=e.n(l),d=e(164),h=e(166);e.n(h);i.a.config.productionTip=!1,a.a.attach(document.body),i.a.use(f.a,{loading:e(168)}),new i.a({el:"#app",router:c.a,store:d.a,template:"<App/>",components:{App:s.a}})},195:function(t,n,e){"use strict";var o=e(123),i=e(81);n.a={setGeoPosition:function(t,n){var r=(t.state,t.commit),s=n.latitude,c=n.longitude,u=n.geohash;r(o.a,s),r(o.b,c),r(o.c,u),e.i(i.a)({latitude:s,longitude:c,geohash:u})},savesearchHistory:function(t,n){t.state;(0,t.commit)(o.d,e.i(i.b)(n))},clearSearchHistory:function(t){(0,t.commit)(o.d,e.i(i.c)())},alertTips:function(t,n){var e=(t.state,t.commit),i=n.alertText,r=n.hasTips;setTimeout(function(){r=!1,e(o.e,r)},2e3),e(o.f,i),e(o.e,r)}}},196:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"selectedShopper",function(){return o}),e.d(n,"cartFoods",function(){return i}),e.d(n,"selectedEntries",function(){return r}),e.d(n,"latitude",function(){return s}),e.d(n,"longitude",function(){return c}),e.d(n,"geohash",function(){return u}),e.d(n,"searchHistory",function(){return a}),e.d(n,"showFlagGPS",function(){return l}),e.d(n,"userInfo",function(){return f}),e.d(n,"alertText",function(){return d}),e.d(n,"hasTips",function(){return h});var o=function(t){return t.selectedShopper},i=function(t){return t.cartFoods},r=function(t){return t.selectedEntries},s=function(t){return t.latitude},c=function(t){return t.longitude},u=function(t){return t.geohash},a=function(t){return t.searchHistory},l=function(t){return t.showFlagGPS},f=function(t){return t.userInfo},d=function(t){return t.alertText},h=function(t){return t.hasTips}},197:function(t,n,e){"use strict";var o,i=e(203),r=e.n(i),s=e(75),c=e.n(s),u=e(123),a=e(81);n.a=(o={},r()(o,u.g,function(t,n){t.selectedShopper=n}),r()(o,u.h,function(t,n){var e=t.cartFoods,o=e[n.shopid]=e[n.shopid]||{},i=o[n.category_id]=o[n.category_id]||{},r=i[n.item_id]=i[n.item_id]||{};r[n.food_id]?r[n.food_id].count++:r[n.food_id]={count:1,food_id:n.food_id,name:n.name,price:n.price,packing_fee:n.packing_fee,stock:n.stock,spec:n.spec,attr:n.attr,specfoods:n.specfoods},t.cartFoods=c()({},e)}),r()(o,u.i,function(t,n){var e=t.cartFoods,o=e[n.shopid]||{},i=o[n.category_id]||{},r=i[n.item_id]||{};r&&r[n.food_id]&&(r[n.food_id].count>0&&0===--r[n.food_id].count&&delete r[n.food_id],t.cartFoods=c()({},e))}),r()(o,u.j,function(t,n){t.cartFoods[n]=null,t.cartFoods=c()({},t.cartFoods)}),r()(o,u.k,function(t,n){t.selectedEntries=n}),r()(o,u.a,function(t,n){t.latitude=n}),r()(o,u.b,function(t,n){t.longitude=n}),r()(o,u.c,function(t,n){t.geohash=n}),r()(o,u.d,function(t,n){t.searchHistory=n}),r()(o,u.l,function(t,n){t.showFlagGPS=n}),r()(o,u.m,function(t,n){t.userInfo=n,e.i(a.d)(n)}),r()(o,u.n,function(t){t.userInfo=null,e.i(a.e)()}),r()(o,u.f,function(t,n){t.alertText=n}),r()(o,u.e,function(t,n){t.hasTips=n}),o)},198:function(t,n,e){"use strict";var o=e(81);n.a={selectedShopper:[],cartFoods:{},selectedEntries:{},latitude:e.i(o.f)().latitude,longitude:e.i(o.f)().longitude,geohash:e.i(o.f)().geohash,searchHistory:e.i(o.g)(),showFlagGPS:!1,userInfo:e.i(o.h)(),alertText:"",hasTips:!1}},199:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(75),i=e.n(o),r=e(427),s=e.n(r),c=e(76),u=e(116);n.default={computed:i()({},e.i(c.a)(["showFlagGPS","latitude","longitude"])),created:function(){var t=this;this.latitude&&this.longitude||navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){e.i(u.a)(n.coords.latitude,n.coords.longitude).then(function(n){t.setGeoPosition({latitude:n.latitude,longitude:n.longitude,geohash:n.geohash})})})},methods:i()({setGPS:function(){this.setGPSShow(!this.showFlagGPS)}},e.i(c.b)({setGPSShow:"SET_SHOWFLAGGPS"}),e.i(c.c)(["setGeoPosition"])),components:{GeoPosition:s.a}}},200:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(175),i=e.n(o);n.default={props:{click:{type:Boolean,default:!0},probeType:{type:Number,default:1},data:{type:Array,default:null},listenScroll:{type:Boolean,default:!1},pullup:{type:Boolean,default:!1},beforeScroll:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},scrollEnd:{type:Boolean,default:!1},scrollX:{type:Boolean,default:!0},scrollY:{type:Boolean,default:!0}},mounted:function(){var t=this;setTimeout(function(){t._initScroll()},20)},methods:{_initScroll:function(){var t=this;if(this.$refs.wrapper){if(this.scroll=new i.a(this.$refs.wrapper,{probeType:this.probeType,click:this.click,bounce:this.bounce,scrollX:this.scrollX,scrollY:this.scrollY}),this.listenScroll){var n=this;this.scroll.on("scroll",function(t){n.$emit("scroll",t)})}this.pullup&&this.scroll.on("scrollEnd",function(){t.scroll.y<=t.scroll.maxScrollY+50&&t.$emit("scrollToEnd")}),this.beforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforeScroll")}),this.scrollEnd&&this.scroll.on("scrollEnd",function(){t.$emit("scrollToEnd")})}},refresh:function(){this.scroll&&this.scroll.refresh()},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},disable:function(){this.scroll&&this.scroll.disable()}},watch:{data:function(){var t=this;setTimeout(function(){t.refresh()},20)}}}},201:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(75),i=e.n(o),r=e(174),s=e.n(r),c=e(116),u=e(173),a=e(76);n.default={data:function(){return{query:"",result:[],beforeScroll:!0}},created:function(){var t=this;this.$watch("query",e.i(u.a)(function(n){n&&t.search(n)},400))},methods:i()({back:function(){this.query="",this.$emit("goback")},clear:function(){this.query=""},search:function(){var t=this;e.i(c.b)(this.query).then(function(n){t.result=n})},blur:function(){this.$refs.input.blur()},selectGPS:function(t){this.setGeoPosition(t),this.query="",this.$emit("goback")}},e.i(a.c)(["setGeoPosition"])),components:{Scroll:s.a}}},421:function(t,n){},422:function(t,n){},423:function(t,n){},427:function(t,n,e){function o(t){e(421)}var i=e(74)(e(201),e(428),o,"data-v-398e133c",null);t.exports=i.exports},428:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"geoPosition"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[e("i",{staticClass:"icon-arrow_back",on:{click:t.back}}),t._v(" "),e("h1",{staticClass:"name"},[t._v("选择地址")])]),t._v(" "),e("div",{staticClass:"search-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"search",attrs:{type:"text",placeholder:"请输入地址"},domProps:{value:t.query},on:{input:function(n){n.target.composing||(t.query=n.target.value)}}}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],staticClass:"icon-close",on:{click:t.clear}})])]),t._v(" "),e("scroll",{staticClass:"suggest",attrs:{data:t.result,"before-scroll":t.beforeScroll},on:{beforeScroll:t.blur}},[e("ul",{staticClass:"suggest-list"},t._l(t.result,function(n){return e("li",{staticClass:"suggest-item border-1px",on:{click:function(e){t.selectGPS(n)}}},[e("p",{staticClass:"name"},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"address"},[t._v(t._s(n.address))])])}))])],1)])},staticRenderFns:[]}},429:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[t.showFlagGPS?e("geo-position",{on:{goback:t.setGPS}}):t._e(),t._v(" "),e("router-view")],1)},staticRenderFns:[]}},430:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{ref:"wrapper",staticClass:"scroll"},[t._t("default")],2)},staticRenderFns:[]}},81:function(t,n,e){"use strict";function o(t){var n=g.a.session.get(_,{});return n=h()({},t),g.a.session.set(_,n),n}function i(){return g.a.session.get(_,{})}function r(t){var n=g.a.get(m,[]);return u(n,t,function(n){return n===t},S),g.a.set(m,n)}function s(){return g.a.get(m,[])}function c(){return g.a.remove(m),[]}function u(t,n,e,o){var i=t.findIndex(e);0!==i&&(i>0&&t.splice(i,1),t.unshift(n),o&&t.length>o&&t.pop())}function a(t){var n=g.a.get(v,null);n=h()({},t),g.a.set(v,n)}function l(){return g.a.get(v,null)}function f(){return g.a.remove(v)}n.a=o,n.f=i,n.b=r,n.g=s,n.c=c,n.d=a,n.h=l,n.e=f;var d=e(77),h=e.n(d),p=e(434),g=e.n(p),_="__location__",m="__search-elem__",v="__user_info__",S="10"}},[194]);